{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Scripts\\UI\\Controls/assets\\Scripts\\UI\\Controls\\HintBoardRenderer.js"],"names":["require","cc","Class","extends","Component","properties","boardWidth","boardHeight","poemId","poemDefinition","default","type","PoemDefinition","puzzleDefinition","PuzzleDefinition","stageDefinition","StageDefinition","characterAnchors","Node","poemBoardPrefab","Prefab","init","console","log","onLoad","self","lines","selectedLines","lineCount","columnCount","i","length","j","lineIndex","characterId","content","GlobalStorage","loadCharacterSpriteFrame","characterSpriteFrame","ii","jj","node","charSprite","addComponent","Sprite","spriteFrame","anchor","position","x","y","addChild","v2","start"],"mappings":"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","file":"HintBoardRenderer.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Scripts\\UI\\Controls","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nrequire('GlobalStorage');\r\n\r\nrequire('PoemDefinition');\r\nrequire('StageDefinition');\r\nrequire('PuzzleDefinition');\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        \r\n        boardWidth: 1,\r\n        \r\n        boardHeight: 1,\r\n        \r\n        poemId: 0,\r\n        \r\n        poemDefinition: {\r\n            default: null,\r\n            type: cc.PoemDefinition,\r\n        },\r\n        \r\n        puzzleDefinition: {\r\n            default: null,\r\n            type: cc.PuzzleDefinition,\r\n        },\r\n        \r\n        stageDefinition: {\r\n            default: null,\r\n            type: cc.StageDefinition,\r\n        },\r\n        \r\n        characterAnchors: {\r\n            default: [],\r\n            type: cc.Node\r\n        },\r\n        \r\n        poemBoardPrefab: cc.Prefab,\r\n        \r\n        \r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    init: function(stageDefinition) {\r\n    \r\n        console.log('PoemBoard init.');\r\n        \r\n        this.stageDefinition = stageDefinition;\r\n        this.poemDefinition = this.stageDefinition.poemDefinition;\r\n        this.puzzleDefinition = this.stageDefinition.puzzleDefinition;\r\n    },\r\n\r\n\r\n    onLoad () {\r\n        \r\n        if (!this.poemDefinition) {\r\n        \r\n            console.log('poemDefinition is null.');\r\n            return;\r\n        }\r\n        \r\n        var self = this;\r\n        \r\n        //cc.loader.loadRes(\"characters/chars_fzlb\", cc.SpriteAtlas, function (err, atlas) {\r\n            \r\n        //    var frame = atlas.getSpriteFrame('c_7eb7');\r\n        //    self.testSprite.spriteFrame = frame;\r\n        //});\r\n        \r\n        \r\n        let lines = this.puzzleDefinition.selectedLines;\r\n        \r\n        let lineCount = this.poemDefinition.lineCount;\r\n        let columnCount = this.poemDefinition.columnCount;\r\n        \r\n        //cc.loader.loadRes(\"characters/chars_fzlb\", cc.SpriteAtlas, function (err, atlas) {\r\n            \r\n        //    var frame = atlas.getSpriteFrame('c_7eb7');\r\n            \r\n            //var node = new cc.Node();\r\n            //let charSprite = node.addComponent(cc.Sprite);\r\n            //charSprite.spriteFrame = frame;\r\n            //node.zIndex = 10;\r\n            \r\n            //anchor.addChild(node);\r\n            \r\n        //    self.testSprite.spriteFrame = frame;\r\n        //});\r\n        \r\n        console.log('onLoad: loading PoemDefinitions. Totallength: ', lineCount, columnCount);\r\n        console.log('selectedLines: ', lines);\r\n        for (var i = 0; i < lines.length; ++i) {\r\n            for (var j = 0; j < columnCount; ++j) {\r\n                \r\n                var lineIndex = lines[i];\r\n                var characterId = this.poemDefinition.content[lineIndex][j];\r\n                cc.GlobalStorage.loadCharacterSpriteFrame(characterId, i, j, function(characterSpriteFrame, ii, jj) {\r\n        \r\n                    var node = new cc.Node();\r\n                    let charSprite = node.addComponent(cc.Sprite);\r\n                    charSprite.spriteFrame = characterSpriteFrame;\r\n                    \r\n                    var anchor = self.characterAnchors[ii * columnCount + jj];\r\n                    console.log('anchor position:', anchor.position.x, anchor.position.y);\r\n                    \r\n                    anchor.addChild(node);\r\n                    node.position = cc.v2(0, 0);\r\n                });\r\n            }\r\n        }\r\n    },\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}