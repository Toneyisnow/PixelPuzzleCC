{"version":3,"sources":["SelectStageScene.js"],"names":["require","cc","Class","extends","Component","properties","categoryTitle","default","type","Node","titleTransitionDuration","fadeInDuration","stagePreviewAnchors","stagePreviewPrefab","Prefab","stagePreviewNodes","onLoad","createStagePreviews","start","moveTitleAction","targetedAction","moveTo","actions","i","targetedx","fadeIn","push","seq","sequence","spawn","node","runAction","record","StageRecord","stageId","previewNode","instantiate","anchor","addChild","position","v2","opacity","on","onPreviewNodeSelected","previewRenderer","getComponent","init","console","log","GlobalStorage","saveIntermediateValue","director","loadScene"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,QAAQ,eAAR;AACAA,QAAQ,aAAR;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAILC,gBAAY;;AAERC,uBAAe;AACXC,qBAAS,IADE;AAEXC,kBAAMP,GAAGQ;AAFE,SAFP;;AAORC,iCAAyB,GAPjB;AAQRC,wBAAgB,GARR;;AAURC,6BAAqB;AACjBL,qBAAS,EADQ;AAEjBC,kBAAMP,GAAGQ;AAFQ,SAVb;;AAgBRI,4BAAoBZ,GAAGa,MAhBf;;AAkBRC,2BAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCQ,KAJP;;AAwCL;;AAEAC,UA1CK,oBA0CK;;AAEN,aAAKC,mBAAL;AACH,KA7CI;AA+CLC,SA/CK,mBA+CI;;AAEL,YAAIC,kBAAkBlB,GAAGmB,cAAH,CAAkB,KAAKd,aAAvB,EAAsCL,GAAGoB,MAAH,CAAU,KAAKX,uBAAf,EAAwC,CAAxC,EAA2C,GAA3C,CAAtC,CAAtB;;AAEA,YAAIY,UAAU,EAAd;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuB,EAAEA,CAAzB,EAA4B;AACxB,gBAAIC,YAAYvB,GAAGmB,cAAH,CAAkB,KAAKL,iBAAL,CAAuBQ,CAAvB,CAAlB,EAA6CtB,GAAGwB,MAAH,CAAU,KAAKd,cAAf,CAA7C,CAAhB;AACAW,oBAAQI,IAAR,CAAaF,SAAb;AACH;;AAED,YAAIG,MAAM1B,GAAG2B,QAAH,CAAYT,eAAZ,EAA6BlB,GAAG4B,KAAH,CAASP,OAAT,CAA7B,CAAV;;AAEA,aAAKQ,IAAL,CAAUC,SAAV,CAAoBJ,GAApB;AAEH,KA7DI;;;AA+DLV,yBAAqB,+BAAY;;AAE7B,YAAIe,SAAS,IAAI/B,GAAGgC,WAAP,EAAb;AACAD,eAAOE,OAAP,GAAiB,GAAjB;;AAEA,aAAK,IAAIX,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuB,EAAEA,CAAzB,EAA4B;AACxB,gBAAIY,cAAclC,GAAGmC,WAAH,CAAe,KAAKvB,kBAApB,CAAlB;AACA,gBAAIwB,SAAS,KAAKzB,mBAAL,CAAyBW,CAAzB,CAAb;AACAc,mBAAOC,QAAP,CAAgBH,WAAhB;AACAA,wBAAYI,QAAZ,GAAuBtC,GAAGuC,EAAH,CAAM,CAAN,EAAS,CAAT,CAAvB;AACAL,wBAAYM,OAAZ,GAAsB,CAAtB;;AAEAN,wBAAYO,EAAZ,CAAe,YAAf,EAA6B,KAAKC,qBAAlC,EAAyD,IAAzD;;AAEA,gBAAIC,kBAAkBT,YAAYU,YAAZ,CAAyB,sBAAzB,CAAtB;AACAD,4BAAgBE,IAAhB,CAAqB,GAArB,EAA0Bd,MAA1B;;AAEA,iBAAKjB,iBAAL,CAAuBW,IAAvB,CAA4BS,WAA5B;;AAEAY,oBAAQC,GAAR,CAAY,wBAAZ;AACH;AACJ,KApFI;;AAsFLL,2BAAuB,+BAAST,OAAT,EAAkB;;AAErCa,gBAAQC,GAAR,CAAY,yBAAZ,EAAuCd,OAAvC;;AAEAjC,WAAGgD,aAAH,CAAiBC,qBAAjB,CAAuC,iBAAvC,EAA0DhB,OAA1D;AACAjC,WAAGkD,QAAH,CAAYC,SAAZ,CAAsB,eAAtB;AACH;;AAGD;AA/FK,CAAT","file":"SelectStageScene.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\UI","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nrequire('GlobalStorage');\r\nrequire('StageRecord');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    \r\n    properties: {\r\n        \r\n        categoryTitle: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        \r\n        titleTransitionDuration: 1.0,\r\n        fadeInDuration: 1.5,\r\n        \r\n        stagePreviewAnchors: {\r\n            default: [],\r\n            type: cc.Node\r\n        },\r\n        \r\n        \r\n        stagePreviewPrefab: cc.Prefab,\r\n        \r\n        stagePreviewNodes: [],\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        \r\n        this.createStagePreviews();\r\n    },\r\n\r\n    start () {\r\n    \r\n        var moveTitleAction = cc.targetedAction(this.categoryTitle, cc.moveTo(this.titleTransitionDuration, 0, 350));\r\n        \r\n        var actions = [];\r\n        for (var i = 0; i < 9; ++i) {\r\n            var targetedx = cc.targetedAction(this.stagePreviewNodes[i], cc.fadeIn(this.fadeInDuration));\r\n            actions.push(targetedx);\r\n        }\r\n        \r\n        var seq = cc.sequence(moveTitleAction, cc.spawn(actions));\r\n        \r\n        this.node.runAction(seq);\r\n        \r\n    },\r\n\r\n    createStagePreviews: function () {\r\n        \r\n        var record = new cc.StageRecord();\r\n        record.stageId = 101;\r\n        \r\n        for (var i = 0; i < 9; ++i) {\r\n            var previewNode = cc.instantiate(this.stagePreviewPrefab);\r\n            var anchor = this.stagePreviewAnchors[i];\r\n            anchor.addChild(previewNode);\r\n            previewNode.position = cc.v2(0, 0);\r\n            previewNode.opacity = 0;\r\n            \r\n            previewNode.on(\"onSelected\", this.onPreviewNodeSelected, this);\r\n            \r\n            var previewRenderer = previewNode.getComponent('StagePreviewRenderer');\r\n            previewRenderer.init(101, record);\r\n            \r\n            this.stagePreviewNodes.push(previewNode);\r\n            \r\n            console.log('Created Stage Preview.');\r\n        }\r\n    },\r\n\r\n    onPreviewNodeSelected: function(stageId) {\r\n        \r\n        console.log('onPreviewNodeSelected: ', stageId);\r\n        \r\n        cc.GlobalStorage.saveIntermediateValue(\"selectedStageId\", stageId);\r\n        cc.director.loadScene(\"MainGameScene\");\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}