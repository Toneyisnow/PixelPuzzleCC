{"version":3,"sources":["SelectStageScene.js"],"names":["require","cc","Class","extends","Component","properties","categoryTitle","default","type","Node","titleTransitionDuration","fadeInDuration","stagePreviewAnchors","stagePreviewPrefab","Prefab","stagePreviewNodes","onLoad","createStagePreviews","start","moveTitleAction","targetedAction","moveTo","actions","i","targetedx","fadeIn","push","seq","sequence","spawn","node","runAction","record","StageRecord","previewNode","instantiate","anchor","addChild","position","v2","opacity","on","onPreviewNodeClicked","previewRenderer","getComponent","init","callbackHandler","console","log","director","loadScene"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,QAAQ,aAAR;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAILC,gBAAY;;AAERC,uBAAe;AACXC,qBAAS,IADE;AAEXC,kBAAMP,GAAGQ;AAFE,SAFP;;AAORC,iCAAyB,GAPjB;AAQRC,wBAAgB,GARR;;AAURC,6BAAqB;AACjBL,qBAAS,EADQ;AAEjBC,kBAAMP,GAAGQ;AAFQ,SAVb;;AAgBRI,4BAAoBZ,GAAGa,MAhBf;;AAkBRC,2BAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCQ,KAJP;;AAwCL;;AAEAC,UA1CK,oBA0CK;;AAEN,aAAKC,mBAAL;AACH,KA7CI;AA+CLC,SA/CK,mBA+CI;;AAEL,YAAIC,kBAAkBlB,GAAGmB,cAAH,CAAkB,KAAKd,aAAvB,EAAsCL,GAAGoB,MAAH,CAAU,KAAKX,uBAAf,EAAwC,CAAxC,EAA2C,GAA3C,CAAtC,CAAtB;;AAEA,YAAIY,UAAU,EAAd;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuB,EAAEA,CAAzB,EAA4B;AACxB,gBAAIC,YAAYvB,GAAGmB,cAAH,CAAkB,KAAKL,iBAAL,CAAuBQ,CAAvB,CAAlB,EAA6CtB,GAAGwB,MAAH,CAAU,KAAKd,cAAf,CAA7C,CAAhB;AACAW,oBAAQI,IAAR,CAAaF,SAAb;AACH;;AAED,YAAIG,MAAM1B,GAAG2B,QAAH,CAAYT,eAAZ,EAA6BlB,GAAG4B,KAAH,CAASP,OAAT,CAA7B,CAAV;;AAEA,aAAKQ,IAAL,CAAUC,SAAV,CAAoBJ,GAApB;AAEH,KA7DI;;;AA+DLV,yBAAqB,+BAAY;;AAE7B,YAAIe,SAAS,IAAI/B,GAAGgC,WAAP,EAAb;;AAEA,aAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuB,EAAEA,CAAzB,EAA4B;AACxB,gBAAIW,cAAcjC,GAAGkC,WAAH,CAAe,KAAKtB,kBAApB,CAAlB;AACA,gBAAIuB,SAAS,KAAKxB,mBAAL,CAAyBW,CAAzB,CAAb;AACAa,mBAAOC,QAAP,CAAgBH,WAAhB;AACAA,wBAAYI,QAAZ,GAAuBrC,GAAGsC,EAAH,CAAM,CAAN,EAAS,CAAT,CAAvB;AACAL,wBAAYM,OAAZ,GAAsB,CAAtB;;AAEAN,wBAAYO,EAAZ,CAAe,OAAf,EAAwB,KAAKC,oBAA7B,EAAmD,IAAnD;;AAEA,gBAAIC,kBAAkBT,YAAYU,YAAZ,CAAyB,oBAAzB,CAAtB;AACAD,4BAAgBE,IAAhB,CAAqBtB,CAArB,EAAwBS,MAAxB;AACAW,4BAAgBG,eAAhB,GAAkC,IAAlC;;AAEA,iBAAK/B,iBAAL,CAAuBW,IAAvB,CAA4BQ,WAA5B;;AAEAa,oBAAQC,GAAR,CAAY,wBAAZ;AACH;AACJ,KApFI;;AAsFLN,0BAAsB,8BAASZ,IAAT,EAAe;;AAEjC7B,WAAGgD,QAAH,CAAYC,SAAZ,CAAsB,eAAtB;AACH;;AAGD;AA5FK,CAAT","file":"SelectStageScene.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\UI","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nrequire('StageRecord');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    \r\n    properties: {\r\n        \r\n        categoryTitle: {\r\n            default: null,\r\n            type: cc.Node,\r\n        },\r\n        \r\n        titleTransitionDuration: 1.0,\r\n        fadeInDuration: 1.5,\r\n        \r\n        stagePreviewAnchors: {\r\n            default: [],\r\n            type: cc.Node\r\n        },\r\n        \r\n        \r\n        stagePreviewPrefab: cc.Prefab,\r\n        \r\n        stagePreviewNodes: [],\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad () {\r\n        \r\n        this.createStagePreviews();\r\n    },\r\n\r\n    start () {\r\n    \r\n        var moveTitleAction = cc.targetedAction(this.categoryTitle, cc.moveTo(this.titleTransitionDuration, 0, 350));\r\n        \r\n        var actions = [];\r\n        for (var i = 0; i < 9; ++i) {\r\n            var targetedx = cc.targetedAction(this.stagePreviewNodes[i], cc.fadeIn(this.fadeInDuration));\r\n            actions.push(targetedx);\r\n        }\r\n        \r\n        var seq = cc.sequence(moveTitleAction, cc.spawn(actions));\r\n        \r\n        this.node.runAction(seq);\r\n        \r\n    },\r\n\r\n    createStagePreviews: function () {\r\n        \r\n        var record = new cc.StageRecord();\r\n        \r\n        for (var i = 0; i < 9; ++i) {\r\n            var previewNode = cc.instantiate(this.stagePreviewPrefab);\r\n            var anchor = this.stagePreviewAnchors[i];\r\n            anchor.addChild(previewNode);\r\n            previewNode.position = cc.v2(0, 0);\r\n            previewNode.opacity = 0;\r\n            \r\n            previewNode.on(\"click\", this.onPreviewNodeClicked, this);\r\n            \r\n            var previewRenderer = previewNode.getComponent('StagePreviewPrefab');\r\n            previewRenderer.init(i, record);\r\n            previewRenderer.callbackHandler = this;\r\n            \r\n            this.stagePreviewNodes.push(previewNode);\r\n            \r\n            console.log('Created Stage Preview.');\r\n        }\r\n    },\r\n\r\n    onPreviewNodeClicked: function(node) {\r\n        \r\n        cc.director.loadScene(\"MainGameScene\");\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});\r\n"]}