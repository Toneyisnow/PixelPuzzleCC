{"version":3,"sources":["StageDefinition.js"],"names":["require","StageDefinition","stageId","poem","cc","PoemDefinition","contentCharArray","length","callback","caller","console","log","resouceUrl","loader","loadRes","JsonAsset","err","result","target","JSON","stringify","Object","assign","json"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,QAAQ,gBAAR;;IAGMC;AAEF,+BAAc;AAAA;;AAEV,aAAKC,OAAL,GAAe,CAAf;;AAEA,aAAKC,IAAL,GAAY,IAAIC,GAAGC,cAAP,EAAZ;AAEH;;AAED;;;;;sCA4Bc;;AAEV,mBAAO,KAAKC,gBAAL,CAAsBC,MAA7B;AACH;;;kCAES;;AAEN,mBAAO,KAAKJ,IAAZ;AACH;;;qCAnCmBD,SAASM,UAAUC,QAAQ;;AAE3CC,oBAAQC,GAAR,CAAY,eAAZ,EAA6B,kBAAkBT,OAA/C;;AAEA,gBAAIU,aAAa,kBAAkBV,OAAnC;AACAE,eAAGS,MAAH,CAAUC,OAAV,CAAkBF,UAAlB,EAA8BR,GAAGW,SAAjC,EAA4C,UAAUC,GAAV,EAAeC,MAAf,EAC5C;AACI,oBAAIC,SAAS,IAAId,GAAGH,eAAP,EAAb;AACAiB,uBAAOhB,OAAP,GAAiBA,OAAjB;;AAEAQ,wBAAQC,GAAR,CAAY,WAAWQ,KAAKC,SAAL,CAAeJ,GAAf,CAAvB;AACAN,wBAAQC,GAAR,CAAY,kBAAkBQ,KAAKC,SAAL,CAAeH,MAAf,CAA9B;;AAEAI,uBAAOC,MAAP,CAAcJ,MAAd,EAAsBD,OAAOM,IAA7B;;AAEAL,uBAAOf,IAAP,GAAc,IAAIC,GAAGC,cAAP,EAAd;AACAgB,uBAAOC,MAAP,CAAcJ,OAAOf,IAArB,EAA2Bc,OAAOM,IAAP,CAAYpB,IAAvC;;AAEA;AACA;;AAEAK,yBAASC,MAAT,EAAiBS,MAAjB;AACH,aAjBD;AAmBH;;;;;;AAcJ;;AAIDd,GAAGH,eAAH,GAAqBA,eAArB","file":"StageDefinition.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\Scripts\\Components","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nrequire('PoemDefinition');\r\n\r\n\r\nclass StageDefinition {\r\n    \r\n    constructor() {\r\n        \r\n        this.stageId = 0;\r\n        \r\n        this.poem = new cc.PoemDefinition();\r\n        \r\n    }\r\n    \r\n    // Load definition from JSON file\r\n    static loadFromJson(stageId, callback, caller) {\r\n    \r\n        console.log('loadFromJson:', 'stages/stage_' + stageId);\r\n        \r\n        var resouceUrl = 'stages/stage_' + stageId;\r\n        cc.loader.loadRes(resouceUrl, cc.JsonAsset, function( err, result)\r\n        {\r\n            var target = new cc.StageDefinition();\r\n            target.stageId = stageId;\r\n        \r\n            console.log('error:' + JSON.stringify(err));\r\n            console.log('load result: ' + JSON.stringify(result));\r\n            \r\n            Object.assign(target, result.json);\r\n            \r\n            target.poem = new cc.PoemDefinition();\r\n            Object.assign(target.poem, result.json.poem);\r\n            \r\n            //console.log('load result poem: ' + JSON.stringify(target.poem));\r\n            //console.log('load result json poem: ' + JSON.stringify(result.json.poem));\r\n            \r\n            callback(caller, target);\r\n        });\r\n        \r\n    }\r\n    \r\n    \r\n    totalLength() {\r\n        \r\n        return this.contentCharArray.length;\r\n    }\r\n    \r\n    getPoem() {\r\n        \r\n        return this.poem;\r\n    }\r\n    \r\n    \r\n};\r\n\r\n\r\n\r\ncc.StageDefinition = StageDefinition;\r\n"]}